(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{408:function(e,t,r){var content=r(451);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(127).default)("742fa21e",content,!0,{sourceMap:!1})},449:function(e,t,r){"use strict";var o=r(1),n=r(87).findIndex,c=r(162),d="findIndex",l=!0;d in[]&&Array(1)[d]((function(){l=!1})),o({target:"Array",proto:!0,forced:l},{findIndex:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}}),c(d)},450:function(e,t,r){"use strict";r(408)},451:function(e,t,r){var o=r(126)((function(i){return i[1]}));o.push([e.i,'*[data-v-54992c87],[data-v-54992c87]:after,[data-v-54992c87]:before{box-sizing:inherit;margin:0;padding:0}html[data-v-54992c87]{background:#249b48;font-size:62.5%}@media only screen and (max-width:75em){html[data-v-54992c87]{font-size:56.25%}}@media only screen and (max-width:56.25em){html[data-v-54992c87]{font-size:55%}}@media only screen and (max-width:37.5em){html[data-v-54992c87]{font-size:50%}}@media only screen and (min-width:112.5em){html[data-v-54992c87]{font-size:65%}}body[data-v-54992c87]{background:#249b48;box-sizing:border-box;display:none;font-family:"Poppins",sans-serif}@media only screen and (max-width:56.25em){body[data-v-54992c87]{padding:0}}[data-v-54992c87]::-moz-selection{background-color:#249b48;color:#fff}[data-v-54992c87]::selection{background-color:#249b48;color:#fff}[data-v-54992c87]::-webkit-scrollbar{height:8px;width:8px}[data-v-54992c87]::-webkit-scrollbar-track{background:transparent}[data-v-54992c87]::-webkit-scrollbar-thumb{background-color:#249b48;border:none;border-radius:10px}[data-v-54992c87]::-webkit-scrollbar-thumb:hover{background-color:#1a7235}*[data-v-54992c87]{scrollbar-color:#249b48 transparent;scrollbar-width:thin}@keyframes slideFadeInUp-54992c87{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes slide-in-left-54992c87{0%{opacity:0;transform:translateX(-100%)}to{opacity:1;transform:translateX(0)}}@keyframes float-54992c87{0%{transform:translateY(0)}50%{transform:translateY(-10px)}to{transform:translateY(0)}}.slide-in-left[data-v-54992c87]{animation:slide-in-left-54992c87 .5s ease-out forwards}.button-primary[data-v-54992c87]{background:#249b48;border:none;border-radius:1rem;color:#fff;font-weight:500;outline:none;padding:1rem}.transparent-button[data-v-54992c87]{background:transparent;border:1px solid #249b48;color:#249b48}.disabled-btn[data-v-54992c87]{opacity:.4}.floating-element[data-v-54992c87]{animation:float-54992c87 3s ease-in-out infinite;animation-delay:0s;transition:transform .2s ease}.no-scroll[data-v-54992c87]{height:100vh!important;overflow:hidden!important}.spinner[data-v-54992c87]{animation:spin-54992c87 1s linear infinite;border:4px solid rgba(36,155,72,.3);height:3rem;width:3rem}.spinner.path[data-v-54992c87]{stroke:#249b48;stroke-linecap:round}.blur-effect[data-v-54992c87]{filter:blur(3px)}.error-message[data-v-54992c87]{animation:slideFadeInUp-54992c87 .5s ease-out forwards;background:#fff;border-radius:1rem;bottom:15rem;color:red;font-size:1.48rem;font-weight:500;left:0;line-height:2.1rem;margin:2rem 16px;padding:2rem;position:fixed;right:0;z-index:30}.error-message-timeout-bar[data-v-54992c87]{background-color:#249b48;bottom:0;height:4px;left:0;position:absolute;transition:width 4s linear;width:100%}.landing[data-v-54992c87]{overflow-x:hidden}.landing__top[data-v-54992c87]{background:#b6edf2;display:grid;grid-template-columns:repeat(2,1fr);height:100vh;left:0;position:fixed;top:0;width:100%}@media only screen and (max-width:56.25em){.landing__top[data-v-54992c87]{display:flex}}.landing__topleft[data-v-54992c87]{display:flex;justify-content:center}@media only screen and (max-width:56.25em){.landing__topleft[data-v-54992c87]{display:block;width:100%}}.landing__topleft--auth[data-v-54992c87]{padding:0 10rem;width:100rem}@media only screen and (max-width:56.25em){.landing__topleft--auth[data-v-54992c87]{padding:0;width:auto}}.landing__topright[data-v-54992c87],.landing__topright--img[data-v-54992c87]{align-items:center;display:flex;justify-content:center}.landing__topright--img[data-v-54992c87]{transform:scale(1.1);width:100rem}.landing__topright--img img[data-v-54992c87]{height:100%;-o-object-fit:contain;object-fit:contain;width:100%}@media only screen and (max-width:56.25em){.landing__topright[data-v-54992c87]{display:none}}.landing__content[data-v-54992c87]{background:#249b48;margin-top:90rem;position:relative}.landing__seemore[data-v-54992c87]{bottom:10rem;display:flex;justify-content:center;left:0;position:absolute;width:100%}.landing__seemore button[data-v-54992c87]{background:transparent;border:1px solid #fff;border-radius:3rem;color:#fff;cursor:pointer;font-size:1.4rem;font-weight:600;padding:1rem 4rem}.landing__cloud[data-v-54992c87]{bottom:0;height:34rem;position:absolute;transform:scale(1.1);width:100vw;z-index:3}.landing__cloud img[data-v-54992c87]{height:100%;-o-object-fit:cover;object-fit:cover;width:100%}.spinner[data-v-54992c87]{animation:spin-54992c87 .6s linear infinite;border:2px solid #ccc;border-radius:50%;border-top-color:#249b48;display:inline-block;height:16px;margin-right:.4rem;width:16px}@keyframes spin-54992c87{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.search-bar[data-v-54992c87]{margin-bottom:1.5rem}.search-bar input[type=text][data-v-54992c87]{border:1px solid #ccc;border-radius:.4rem;font-size:1.2rem;outline:none;padding:.8rem 1rem;width:100%}.admin-category-dashboard[data-v-54992c87]{background:#fff;min-height:100vh;overflow-x:auto;padding:2rem}.add-category-form[data-v-54992c87]{background:#fff;border:1px solid #ddd;border-radius:1rem;box-shadow:0 0 15px rgba(0,0,0,.2);left:50%;max-width:600px;padding:2rem;position:fixed;top:10%;transform:translateX(-50%);width:90%;z-index:999}.add-category-form div[data-v-54992c87],.add-category-form h2[data-v-54992c87]{margin-bottom:1rem}.add-category-form input[type=file][data-v-54992c87],.add-category-form input[type=text][data-v-54992c87],.add-category-form textarea[data-v-54992c87]{border:1px solid #ccc;border-radius:.4rem;font-size:1.2rem;padding:.8rem;resize:vertical;width:100%}.add-category-form button[data-v-54992c87]{background:#249b48;border:none;border-radius:.4rem;color:#fff;cursor:pointer;font-size:1.2rem;margin-right:1rem;padding:.6rem 1.2rem}.add-category-form button[data-v-54992c87]:disabled{background-color:#ccc;cursor:not-allowed}.add-category-form-overlay[data-v-54992c87]{background:rgba(0,0,0,.6);height:100vh;left:0;position:fixed;top:0;width:100vw}.add-category-form span.loading-text[data-v-54992c87]{color:#888;display:inline-block;font-size:.95rem;margin-top:.5rem}.dashboard-header[data-v-54992c87]{align-items:center;border-bottom:1px solid #ccc;display:flex;justify-content:space-between;margin-bottom:1.5rem;padding-bottom:1.5rem}.dashboard-header h1[data-v-54992c87]{font-size:2rem;font-weight:700;margin:0}.dashboard-header h1[data-v-54992c87],.dashboard-header h1 span[data-v-54992c87]{align-items:center;display:flex}.dashboard-header h1 span svg[data-v-54992c87]{cursor:pointer;height:2rem;width:3rem}.dashboard-header .dashboard-actions[data-v-54992c87]{display:flex;gap:1rem}.dashboard-header .dashboard-actions button[data-v-54992c87]{background:#249b48;border:none;border-radius:.4rem;color:#fff;cursor:pointer;font-size:1.2rem;padding:.6rem 1.2rem}.dashboard-header .dashboard-actions button[data-v-54992c87]:last-child{background:#dc3545}.category-table[data-v-54992c87]{border-collapse:collapse;font-size:1.3rem;width:100%}.category-table td[data-v-54992c87],.category-table th[data-v-54992c87]{border:1px solid #ddd;padding:.8rem;text-align:left;vertical-align:top}.category-table th[data-v-54992c87]{background-color:#f4f4f4;font-weight:700}.category-table input[type=text][data-v-54992c87],.category-table textarea[data-v-54992c87]{border:1px solid #eee;font-family:inherit;font-size:1.2rem;min-height:3rem;outline:none;padding:.4rem;resize:vertical;width:100%}.category-table button[data-v-54992c87]{background:#007bff;border:none;border-radius:.3rem;color:#fff;cursor:pointer;font-size:1.2rem;margin-right:.5rem;margin-top:.3rem;padding:.5rem 1rem}.category-table button[data-v-54992c87]:last-child{background:#dc3545}.category-table button[data-v-54992c87]:disabled{background-color:#ccc;cursor:not-allowed}.category-thumb[data-v-54992c87]{border-radius:.5rem;height:3rem;-o-object-fit:cover;object-fit:cover;width:3rem}.loading-row[data-v-54992c87],.no-categories[data-v-54992c87]{color:#666;font-size:1.4rem;padding:2rem;text-align:center}.loading-row[data-v-54992c87]{align-items:center;display:flex;gap:.5rem;justify-content:center}.category-pills-section[data-v-54992c87]{border-top:1px solid #eee;margin-bottom:2rem;margin-top:1.5rem;padding-top:1.5rem}.view-more-button[data-v-54992c87]{background:#6c757d;border:none;border-radius:.5rem;color:#fff;cursor:pointer;font-size:1.1rem;padding:.7rem 1.5rem;transition:background-color .2s ease}.view-more-button[data-v-54992c87]:hover{background-color:#5a6268}.category-pills-container[data-v-54992c87]{background-color:#f9f9f9;border:1px solid #e0e0e0;border-radius:.8rem;display:flex;flex-wrap:wrap;gap:.8rem;margin-top:1rem;padding:1rem}.category-pill[data-v-54992c87]{align-items:center;background-color:#249b48;border-radius:20px;box-shadow:0 2px 4px rgba(0,0,0,.1);color:#fff;cursor:pointer;display:inline-flex;font-size:.95rem;font-weight:600;padding:.5rem 1rem;text-shadow:0 1px 2px rgba(0,0,0,.2);transition:transform .2s ease;white-space:nowrap}.category-pill[data-v-54992c87]:hover{transform:translateY(-2px)}.no-categories-pills[data-v-54992c87]{color:#888;font-style:italic;padding:1rem 0;text-align:center;width:100%}.category-details-overlay[data-v-54992c87]{align-items:center;background:rgba(0,0,0,.6);display:flex;height:100vh;justify-content:center;left:0;position:fixed;top:0;width:100vw;z-index:1000}.category-details-popup[data-v-54992c87]{background:#fff;border-radius:1rem;box-shadow:0 0 20px rgba(0,0,0,.3);max-width:500px;padding:2rem;text-align:center;width:90%}.category-details-popup h2[data-v-54992c87]{color:#333;font-size:1.8rem;margin-bottom:1rem;margin-top:0}.category-details-popup .description-text[data-v-54992c87]{color:#555;font-size:1.1rem;line-height:1.6;margin-bottom:1.5rem}.category-details-popup .button-group[data-v-54992c87]{display:flex;gap:1rem;justify-content:center}.category-details-popup .button-group button[data-v-54992c87]{border:none;border-radius:.5rem;cursor:pointer;font-size:1.1rem;padding:.8rem 1.5rem;transition:background-color .2s ease}.category-details-popup .button-group button[data-v-54992c87]:first-child{background:#249b48;color:#fff}.category-details-popup .button-group button[data-v-54992c87]:first-child:hover{background-color:#1a7235}.category-details-popup .button-group button.cancel-button[data-v-54992c87]{background:#6c757d;color:#fff}.category-details-popup .button-group button.cancel-button[data-v-54992c87]:hover{background-color:#5a6268}.remove-button[data-v-54992c87]{background-color:#ffc107!important;color:#333!important}.remove-button[data-v-54992c87]:hover{background-color:#d39e00!important}',""]),o.locals={},e.exports=o},490:function(e,t,r){"use strict";r.r(t);r(40),r(85),r(44);var o=r(28),n=r(3),c=(r(39),r(83),r(42),r(449),r(52),r(51),r(80),r(81),r(41),r(18),r(63),r(43),r(31));function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){Object(o.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var m={name:"AdminCategoryDashboard",data:function(){return{categories:[],allCategories:[],showAddCategoryForm:!1,newCategory:{name:"",description:"",hexcolor:"",image:""},imageUploading:!1,categorySubmitting:!1,searchQuery:"",loadingCategories:!1,showCategoryPills:!1,loadingAllCategories:!1,selectedCategory:null,showCategoryDetails:!1,productCategories:[]}},computed:{filteredCategories:function(){if(!this.searchQuery)return this.categories;var e=this.searchQuery.toLowerCase();return this.categories.filter((function(t){return t.name.toLowerCase().includes(e)||t.description.toLowerCase().includes(e)}))},hasProductId:function(){return!!this.$route.query.product_id},unlinkedCategories:function(){var e=this;return this.hasProductId?this.allCategories.filter((function(t){return!e.productCategories.includes(t._id)})):this.allCategories}},watch:{showCategoryPills:function(e){e&&0===this.allCategories.length&&!this.loadingAllCategories&&this.fetchAllCategories()}},mounted:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchCategories();case 2:case"end":return t.stop()}}),t)})))()},methods:{getAuthHeaders:function(){var e=localStorage.getItem("admin_token");return{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}},fetchCategories:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,o,n,data,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loadingCategories=!0,e.productCategories=[],r=e.$route.query.product_id,t.prev=3,o="".concat(c.c,"/admin/categories"),r&&(o+="?product_id=".concat(r)),t.next=8,fetch(o,{headers:e.getAuthHeaders()});case 8:return n=t.sent,t.next=11,Object(c.b)(n);case 11:return t.next=13,n.json();case 13:data=t.sent,d=data.categories,e.categories=d.map((function(e){return l(l({},e),{},{isSaving:!1,isDeleting:!1,isRemoving:!1})})),r&&(e.productCategories=d.map((function(e){return e._id}))),t.next=23;break;case 19:t.prev=19,t.t0=t.catch(3),console.error("Error fetching categories:",t.t0),Object(c.d)("Failed to load categories.");case 23:return t.prev=23,e.loadingCategories=!1,t.finish(23);case 26:case"end":return t.stop()}}),t,null,[[3,19,23,26]])})))()},fetchAllCategories:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,data,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loadingAllCategories=!0,t.prev=1,t.next=4,fetch("".concat(c.c,"/admin/categories"),{headers:e.getAuthHeaders()});case 4:return r=t.sent,t.next=7,r.json();case 7:data=t.sent,o=data.categories,e.allCategories=o.map((function(e){return l(l({},e),{},{isSaving:!1,isDeleting:!1})})),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(1),console.error("Error fetching all categories:",t.t0),Object(c.d)("Failed to load all categories.");case 16:return t.prev=16,e.loadingAllCategories=!1,t.finish(16);case 19:case"end":return t.stop()}}),t,null,[[1,12,16,19]])})))()},handleImageUpload:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var o,n,d,data;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(o=e.target.files[0]){r.next=3;break}return r.abrupt("return");case 3:return(n=new FormData).append("image",o),t.imageUploading=!0,r.prev=6,r.next=9,fetch("".concat(c.c,"/admin/upload-image"),{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("admin_token"))},body:n});case 9:return d=r.sent,r.next=12,Object(c.b)(d);case 12:return r.next=14,d.json();case 14:(data=r.sent).url?t.newCategory.image=data.url:Object(c.d)("Failed to upload image"),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(6),console.error("Image upload error:",r.t0),Object(c.d)(r.t0.message||"Image upload failed");case 22:return r.prev=22,t.imageUploading=!1,r.finish(22);case 25:case"end":return r.stop()}}),r,null,[[6,18,22,25]])})))()},submitNewCategory:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,o,n,image,d,m,f,data,v;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.newCategory,o=r.name,n=r.description,image=r.image,d=r.hexcolor,o&&n&&image&&d){t.next=4;break}return alert("Name, description, hexcolor, and image are required!"),t.abrupt("return");case 4:return e.categorySubmitting=!0,t.prev=5,m="".concat(c.c,"/admin/create-category"),e.$route.query.product_id&&(m+="?product_id=".concat(e.$route.query.product_id)),t.next=10,fetch(m,{method:"POST",headers:e.getAuthHeaders(),body:JSON.stringify({name:o,description:n,image:image,hexcolor:d})});case 10:return f=t.sent,t.next=13,Object(c.b)(f);case 13:return t.next=15,f.json();case 15:if(!(data=t.sent).error){t.next=19;break}return Object(c.d)(data.error),t.abrupt("return");case 19:v=l(l({},data.category),{},{isSaving:!1,isDeleting:!1,isRemoving:!1}),e.$route.query.product_id&&(e.categories.unshift(v),e.productCategories.push(v._id)),e.allCategories.unshift(v),e.newCategory={name:"",description:"",hexcolor:"",image:""},e.showAddCategoryForm=!1,alert("Category created successfully!"),t.next=31;break;case 27:t.prev=27,t.t0=t.catch(5),console.error("Add category error:",t.t0),Object(c.d)(t.t0.message||"Failed to create category");case 31:return t.prev=31,e.categorySubmitting=!1,t.finish(31);case 34:case"end":return t.stop()}}),t,null,[[5,27,31,34]])})))()},logout:function(){localStorage.removeItem("admin_token"),this.$router.push("/admin/login")},filterCategories:function(){},saveCategory:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var o,n,data,d,m;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.$set(e,"isSaving",!0),r.prev=1,o={name:e.name,description:e.description,image:e.image,hexcolor:e.hexcolor},r.next=5,fetch("".concat(c.c,"/admin/update-category/").concat(e._id),{method:"PUT",headers:t.getAuthHeaders(),body:JSON.stringify(o)});case 5:return n=r.sent,r.next=8,Object(c.b)(n);case 8:return r.next=10,n.json();case 10:if(!(data=r.sent).error){r.next=14;break}return Object(c.d)(data.error),r.abrupt("return");case 14:alert('Category "'.concat(e.name,'" updated successfully!')),-1!==(d=t.categories.findIndex((function(t){return t._id===e._id})))&&t.$set(t.categories,d,l(l({},e),{},{isSaving:!1})),-1!==(m=t.allCategories.findIndex((function(t){return t._id===e._id})))&&t.$set(t.allCategories,m,l(l({},e),{},{isSaving:!1})),r.next=25;break;case 21:r.prev=21,r.t0=r.catch(1),console.error("Save category error:",r.t0),Object(c.d)(r.t0.message||"Failed to save category");case 25:return r.prev=25,t.$set(e,"isSaving",!1),r.finish(25);case 28:case"end":return r.stop()}}),r,null,[[1,21,25,28]])})))()},deleteCategory:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(confirm('Are you sure you want to delete the category "'.concat(e.name,'" permanently? This cannot be undone.'))){r.next=2;break}return r.abrupt("return");case 2:return t.$set(e,"isDeleting",!0),r.prev=3,r.next=6,fetch("".concat(c.c,"/admin/delete-category/").concat(e._id),{method:"DELETE",headers:t.getAuthHeaders()});case 6:return o=r.sent,r.next=9,Object(c.b)(o);case 9:o.ok?(t.categories=t.categories.filter((function(t){return t._id!==e._id})),t.allCategories=t.allCategories.filter((function(t){return t._id!==e._id})),t.productCategories=t.productCategories.filter((function(t){return t!==e._id})),alert('Category "'.concat(e.name,'" deleted successfully!'))):Object(c.d)("Failed to delete category."),r.next=16;break;case 12:r.prev=12,r.t0=r.catch(3),console.error("Delete category error:",r.t0),Object(c.d)(r.t0.message||"Failed to delete category");case 16:return r.prev=16,t.$set(e,"isDeleting",!1),r.finish(16);case 19:case"end":return r.stop()}}),r,null,[[3,12,16,19]])})))()},removeCategoryFromProduct:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var o,n,data;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(confirm('Are you sure you want to remove "'.concat(e.name,'" from this product? This will NOT delete the category permanently.'))){r.next=2;break}return r.abrupt("return");case 2:if(o=t.$route.query.product_id){r.next=6;break}return Object(c.d)("No product ID found in the URL. Cannot remove category from product."),r.abrupt("return");case 6:return t.$set(e,"isRemoving",!0),r.prev=7,r.next=10,fetch("".concat(c.c,"/admin/remove-category-from-product"),{method:"POST",headers:t.getAuthHeaders(),body:JSON.stringify({productId:o,categoryId:e._id})});case 10:return n=r.sent,r.next=13,Object(c.b)(n);case 13:return r.next=15,n.json();case 15:(data=r.sent).error?Object(c.d)(data.error):(alert(data.message),t.categories=t.categories.filter((function(t){return t._id!==e._id})),t.productCategories=t.productCategories.filter((function(t){return t!==e._id})),t.closeCategoryDetails()),r.next=23;break;case 19:r.prev=19,r.t0=r.catch(7),console.error("Error removing category from product:",r.t0),Object(c.d)(r.t0.message||"Failed to remove category from product.");case 23:return r.prev=23,t.$set(e,"isRemoving",!1),r.finish(23);case 26:case"end":return r.stop()}}),r,null,[[7,19,23,26]])})))()},showCategoryDescription:function(e){this.selectedCategory=e,this.showCategoryDetails=!0},closeCategoryDetails:function(){this.selectedCategory=null,this.showCategoryDetails=!1},addCategoryToProduct:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var o,n,data;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(o=t.$route.query.product_id){r.next=5;break}return Object(c.d)("No product ID found in the URL. Cannot add category."),t.closeCategoryDetails(),r.abrupt("return");case 5:return r.prev=5,r.next=8,fetch("".concat(c.c,"/admin/add-category-to-product"),{method:"POST",headers:t.getAuthHeaders(),body:JSON.stringify({productId:o,categoryId:e._id})});case 8:return n=r.sent,r.next=11,Object(c.b)(n);case 11:return r.next=13,n.json();case 13:(data=r.sent).error?Object(c.d)(data.error):(alert(data.message),t.categories.some((function(t){return t._id===e._id}))||t.categories.push(l(l({},e),{},{isSaving:!1,isDeleting:!1,isRemoving:!1})),t.productCategories.includes(e._id)||t.productCategories.push(e._id)),r.next=21;break;case 17:r.prev=17,r.t0=r.catch(5),console.error("Error adding category to product:",r.t0),Object(c.d)(r.t0.message||"Failed to add category to product.");case 21:return r.prev=21,t.closeCategoryDetails(),r.finish(21);case 24:case"end":return r.stop()}}),r,null,[[5,17,21,24]])})))()},isCategoryLinked:function(e){return this.productCategories.includes(e)}}},f=(r(450),r(62)),component=Object(f.a)(m,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"admin-category-dashboard"},[t("div",{staticClass:"dashboard-header"},[t("h1",{on:{click:function(t){return e.$router.push("/admin/dashboard")}}},[t("span",{staticClass:"svg"},[t("svg",[t("use",{attrs:{"xlink:href":"/svg/symbol-defs.svg#icon-arrow_back"}})])]),e._v(" "),t("span",[e._v("\n                Category Dashboard "+e._s(e.$route.query.product_name?e.$route.query.product_name:"")+"\n            ")])]),e._v(" "),t("div",{staticClass:"dashboard-actions"},[e.hasProductId?e._e():t("button",{on:{click:function(t){e.showAddCategoryForm=!0}}},[e._v("Add Category")]),e._v(" "),t("button",{on:{click:e.logout}},[e._v("Logout")])])]),e._v(" "),t("div",{staticClass:"search-bar"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.searchQuery,expression:"searchQuery"}],attrs:{type:"text",placeholder:"Search categories by name..."},domProps:{value:e.searchQuery},on:{input:[function(t){t.target.composing||(e.searchQuery=t.target.value)},e.filterCategories]}})]),e._v(" "),e.showAddCategoryForm?t("div",{staticClass:"add-category-form-overlay"},[t("div",{staticClass:"add-category-form"},[t("h2",[e._v("Add New Category")]),e._v(" "),t("div",[t("label",[e._v("Name")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.newCategory.name,expression:"newCategory.name"}],attrs:{type:"text"},domProps:{value:e.newCategory.name},on:{input:function(t){t.target.composing||e.$set(e.newCategory,"name",t.target.value)}}})]),e._v(" "),t("div",[t("label",[e._v("Description")]),e._v(" "),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.newCategory.description,expression:"newCategory.description"}],domProps:{value:e.newCategory.description},on:{input:function(t){t.target.composing||e.$set(e.newCategory,"description",t.target.value)}}})]),e._v(" "),t("div",[t("label",[e._v("Hex Color")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.newCategory.hexcolor,expression:"newCategory.hexcolor"}],attrs:{type:"text"},domProps:{value:e.newCategory.hexcolor},on:{input:function(t){t.target.composing||e.$set(e.newCategory,"hexcolor",t.target.value)}}})]),e._v(" "),t("div",[t("label",[e._v("Upload Image")]),e._v(" "),t("input",{attrs:{type:"file"},on:{change:e.handleImageUpload}}),e._v(" "),e.imageUploading?t("span",{staticClass:"loading-text"},[t("span",{staticClass:"spinner"}),e._v(" Uploading image...\n                ")]):e._e()]),e._v(" "),t("div",[t("button",{attrs:{disabled:e.imageUploading||e.categorySubmitting},on:{click:e.submitNewCategory}},[e.categorySubmitting?t("span",{staticClass:"spinner"}):e._e(),e._v("\n                    "+e._s(e.categorySubmitting?"Submitting...":"Submit")+"\n                ")]),e._v(" "),t("button",{on:{click:function(t){e.showAddCategoryForm=!1}}},[e._v("Cancel")])])])]):e._e(),e._v(" "),t("div",{staticClass:"category-pills-section"},[t("button",{staticClass:"view-more-button",on:{click:function(t){e.showCategoryPills=!e.showCategoryPills}}},[e._v("\n            "+e._s(e.showCategoryPills?"Hide Categories":"View More Categories")+"\n        ")]),e._v(" "),e.showCategoryPills?t("div",{staticClass:"category-pills-container"},[e._l(e.unlinkedCategories,(function(r){return t("span",{key:r._id,staticClass:"category-pill",style:{backgroundColor:r.hexcolor||"#249b48"},on:{click:function(t){return e.showCategoryDescription(r)}}},[e._v("\n                "+e._s(r.name)+"\n            ")])})),e._v(" "),0!==e.unlinkedCategories.length||e.loadingCategories?e._e():t("p",{staticClass:"no-categories-pills"},[e._v("\n                No more categories to link to this product.\n            ")])],2):e._e(),e._v(" "),e.showCategoryDetails&&e.selectedCategory?t("div",{staticClass:"category-details-overlay"},[t("div",{staticClass:"category-details-popup"},[t("h2",[e._v(e._s(e.selectedCategory.name))]),e._v(" "),t("p",{staticClass:"description-text"},[e._v(e._s(e.selectedCategory.description))]),e._v(" "),t("div",{staticClass:"button-group"},[e.hasProductId&&!e.isCategoryLinked(e.selectedCategory._id)?t("button",{on:{click:function(t){return e.addCategoryToProduct(e.selectedCategory)}}},[e._v("Add")]):e._e(),e._v(" "),e.hasProductId&&e.isCategoryLinked(e.selectedCategory._id)?t("button",{on:{click:function(t){return e.removeCategoryFromProduct(e.selectedCategory)}}},[e._v("Remove")]):e._e(),e._v(" "),t("button",{staticClass:"cancel-button",on:{click:e.closeCategoryDetails}},[e._v("Close")])])])]):e._e()]),e._v(" "),t("table",{staticClass:"category-table"},[e._m(0),e._v(" "),t("tbody",[e.loadingCategories?t("tr",[e._m(1)]):0!==e.filteredCategories.length||e.searchQuery?0===e.filteredCategories.length&&e.searchQuery?t("tr",[t("td",{staticClass:"no-categories",attrs:{colspan:"5"}},[e._v('\n                    No categories found matching "'+e._s(e.searchQuery)+'".\n                ')])]):e._e():t("tr",[t("td",{staticClass:"no-categories",attrs:{colspan:"5"}},[e._v("\n                    No categories found. Add a new one!\n                ")])]),e._v(" "),e._l(e.filteredCategories,(function(r){return t("tr",{key:r._id},[t("td",[t("img",{staticClass:"category-thumb",attrs:{src:r.image||"/imgs/placeholder.png"}})]),e._v(" "),t("td",[t("input",{directives:[{name:"model",rawName:"v-model",value:r.name,expression:"category.name"}],attrs:{type:"text"},domProps:{value:r.name},on:{input:function(t){t.target.composing||e.$set(r,"name",t.target.value)}}})]),e._v(" "),t("td",[t("textarea",{directives:[{name:"model",rawName:"v-model",value:r.description,expression:"category.description"}],domProps:{value:r.description},on:{input:function(t){t.target.composing||e.$set(r,"description",t.target.value)}}})]),e._v(" "),t("td",[t("input",{directives:[{name:"model",rawName:"v-model",value:r.hexcolor,expression:"category.hexcolor"}],attrs:{type:"text"},domProps:{value:r.hexcolor},on:{input:function(t){t.target.composing||e.$set(r,"hexcolor",t.target.value)}}})]),e._v(" "),t("td",[t("button",{attrs:{disabled:r.isSaving},on:{click:function(t){return e.saveCategory(r)}}},[r.isSaving?t("span",{staticClass:"spinner"}):e._e(),e._v(" Save\n                    ")]),e._v(" "),e.hasProductId&&e.isCategoryLinked(r._id)?t("button",{staticClass:"remove-button",attrs:{disabled:r.isRemoving},on:{click:function(t){return e.removeCategoryFromProduct(r)}}},[r.isRemoving?t("span",{staticClass:"spinner"}):e._e(),e._v(" Remove\n                    ")]):e._e(),e._v(" "),e.hasProductId?e._e():t("button",{attrs:{disabled:r.isDeleting},on:{click:function(t){return e.deleteCategory(r)}}},[r.isDeleting?t("span",{staticClass:"spinner"}):e._e(),e._v(" Delete\n                    ")])])])}))],2)])])}),[function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",[e._v("Image")]),e._v(" "),t("th",[e._v("Name")]),e._v(" "),t("th",[e._v("Description")]),e._v(" "),t("th",[e._v("Hex color")]),e._v(" "),t("th",[e._v("Actions")])])])},function(){var e=this._self._c;return e("td",{staticClass:"loading-row",attrs:{colspan:"5"}},[e("span",{staticClass:"spinner"}),this._v(" Loading categories...\n                ")])}],!1,null,"54992c87",null);t.default=component.exports}}]);